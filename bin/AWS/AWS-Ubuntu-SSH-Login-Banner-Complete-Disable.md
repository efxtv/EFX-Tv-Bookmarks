# How to disable AWS (Ubuntu) SSH login Banner
_Disabling MOTD, Welcome Banner, and Last Login Messages_

---

## Overview

Ubuntu displays informational text during SSH login through multiple subsystems.  
To achieve a **silent SSH login** (prompt only), all of the following must be addressed:

1. Message of the Day (MOTD) scripts
2. Ubuntu Pro / APT news messages
3. PAM MOTD integration
4. OpenSSH “Last login from …” output

This guide documents each layer, explains its purpose, and provides clear steps to disable it.

---

## Target Systems

- Ubuntu 20.04 LTS
- Ubuntu 22.04 LTS
- Ubuntu 24.04 LTS
- Cloud environments including AWS EC2

---

## 1. Message of the Day (MOTD)

### Description

Ubuntu generates the login banner dynamically using executable scripts located in:

```

/etc/update-motd.d/

````

Each executable file in this directory contributes content to the MOTD displayed at login.

---

### Disable MOTD Scripts (Recommended Method)

Disable execution permission for all MOTD scripts:

```bash
sudo chmod -x /etc/update-motd.d/*
````

This method:

* Preserves files for future re-enablement
* Is safe across upgrades
* Is reversible

---

### Verify MOTD Is Disabled

Reconnect via SSH and confirm that no system information banner is displayed.

---

## 2. Ubuntu Pro / APT News Messages

### Description

Ubuntu may display subscription, security, or update-related messages at login via Ubuntu Pro.

---

### Disable APT News

```bash
sudo pro config set apt_news=false
```

This disables informational messages related to Ubuntu Pro and package updates.

---

## 3. PAM MOTD Integration (Hard Disable)

### Description

Even if MOTD scripts are disabled, PAM (Pluggable Authentication Modules) can still invoke MOTD during SSH login.

PAM configuration for SSH is located at:

```
/etc/pam.d/sshd
```

---

### Disable PAM MOTD

Edit the file:

```bash
sudo nano /etc/pam.d/sshd
```

Locate the following lines:

```text
session optional pam_motd.so motd=/run/motd.dynamic
session optional pam_motd.so noupdate
```

Comment them out:

```text
# session optional pam_motd.so motd=/run/motd.dynamic
# session optional pam_motd.so noupdate
```

Save and exit.

---

## 4. “Last login from …” Message

### Description

The “Last login” message is generated by the OpenSSH daemon and is unrelated to MOTD.

Configuration is controlled by `sshd_config`.

---

### Disable Last Login Message

Edit the SSH daemon configuration:

```bash
sudo nano /etc/ssh/sshd_config
```

Add or modify the following directive:

```text
PrintLastLog no
```

Ensure the line is not commented.

---

### Apply Configuration

Restart the SSH service:

```bash
sudo systemctl restart ssh
```

---

## 5. Verification

Log out and reconnect:

```bash
exit
ssh user@server-ip
```

Expected behavior:

* No welcome banner
* No system or update messages
* No “Last login from …”
* Immediate shell prompt

---

## 6. Security Considerations

Disabling login messages removes visibility into:

* Previous login timestamps
* Detection of unexpected access

Use this configuration primarily for:

* Development environments
* Personal servers
* Automated systems

Retain login messages on shared or production systems when audit visibility is required.

---

## 7. Rollback Procedures

### Restore MOTD Scripts

```bash
sudo chmod +x /etc/update-motd.d/*
```

---

### Re-enable Last Login Message

Edit SSH configuration:

```bash
sudo nano /etc/ssh/sshd_config
```

Change or comment the directive:

```text
# PrintLastLog no
```

Restart SSH:

```bash
sudo systemctl restart ssh
```

---

## Logout and login again
```bash
exit
ssh -i <path-to.pem> username@PublicIP
```

